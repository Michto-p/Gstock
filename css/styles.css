:root {
  --bg: #0b0f14;
  --fg: #e8f0f2;
  --muted:#9bb3bb;
  --acc: #0d9488; /* teal */
  --ok: #16a34a;
  --low: #f59e0b;
  --under: #ef4444;
  --panel: #111827;
  --line: #1f2937;
}
[data-theme="light"] {
  --bg:#f7fafc; --fg:#0b1220; --muted:#5a6b73; --panel:#ffffff; --line:#e5e7eb; --acc:#0d9488;
}
html,body { margin:0; padding:0; height:100%; background:var(--bg); color:var(--fg); font:14px/1.4 system-ui,Segoe UI,Roboto,Arial,sans-serif; }

.topbar{ position:sticky; top:0; z-index:10; display:flex; align-items:center; gap:1rem; padding:.5rem .75rem; background:var(--panel); border-bottom:1px solid var(--line); }
.brand{ font-size:1.1rem; }
nav{ display:flex; gap:.25rem; }
nav button{ background:transparent; border:1px solid var(--line); color:var(--fg); padding:.4rem .55rem; border-radius:.6rem; cursor:pointer; }
nav button.active{ background:var(--acc); border-color:var(--acc); color:#fff; }
.tools{ margin-left:auto; display:flex; align-items:center; gap:.75rem; }
.theme select{ margin-left:.25rem; }

main{ padding:1rem; max-width:1200px; margin:0 auto; }
h1{ margin:.2rem 0 1rem; }
h2{ margin:1rem 0 .5rem; }
.muted{ color:var(--muted); }
.sr{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }

.toolbar{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin:.5rem 0 .75rem; }
.toolbar .spacer{ flex:1; }
input,select,textarea,button{ font:inherit; color:inherit; background:var(--panel); border:1px solid var(--line); border-radius:.5rem; padding:.4rem .5rem; }
input::placeholder, textarea::placeholder{ color:var(--muted); }
button{ cursor:pointer; }
button.ghost{ background:transparent; }
button.danger{ background:#7f1d1d; border-color:#7f1d1d; color:#fff; }

.kpis{ display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:.5rem; }
.kpi{ background:var(--panel); border:1px solid var(--line); border-radius:.75rem; padding:.75rem; }
.kpi .kpi-title{ color:var(--muted); font-size:.85rem; }
.kpi .kpi-value{ font-size:1.6rem; font-weight:700; }
.kpi.low .kpi-value{ color:var(--low); }
.kpi.warn .kpi-value{ color:var(--under); }

.table-wrap{ overflow:auto; border:1px solid var(--line); border-radius:.6rem; }
table.grid{ width:100%; border-collapse:separate; border-spacing:0; min-width:900px; }
table.grid thead th{ position:sticky; top:0; background:var(--panel); z-index:1; }
table.grid th, table.grid td{ padding:.5rem .6rem; border-bottom:1px solid var(--line); }
table.grid tbody tr:nth-child(odd){ background:rgba(255,255,255,.02); }

.badge{ display:inline-block; padding:.15rem .4rem; border-radius:.5rem; font-size:.75rem; border:1px solid transparent; }
.badge.ok{ background:rgba(22,163,74,.1); color:var(--ok); border-color:rgba(22,163,74,.3); }
.badge.low{ background:rgba(245,158,11,.1); color:var(--low); border-color:rgba(245,158,11,.3); }
.badge.under{ background:rgba(239,68,68,.1); color:var(--under); border-color:rgba(239,68,68,.3); }

.pill{ display:inline-block; background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:10rem; padding:.15rem .5rem; margin:.05rem; }

.list{ display:grid; gap:.25rem; }
.list.slim li{ padding:.25rem 0; }
.list.scroll{ max-height:55vh; overflow:auto; border:1px solid var(--line); border-radius:.6rem; padding:.25rem .5rem; }
.list .row{ display:flex; gap:.5rem; align-items:center; padding:.3rem 0; border-bottom:1px dashed var(--line); }
.list .row:last-child{ border-bottom:none; }

.scan-wrap{ display:grid; gap:.5rem; }
#scanVideo, #loanVideo{ width:100%; background:#000; border-radius:.5rem; }
.scan-controls{ display:flex; gap:.5rem; }

.labels-config{ display:grid; grid-template-columns: 320px 1fr; gap:1rem; }
.labels-config .left{ display:flex; flex-direction:column; gap:.5rem; }
.labels-config .right{ background:var(--panel); border:1px solid var(--line); border-radius:.6rem; padding:.5rem; }
.labels-pages{ min-height:400px; }
.preview-head{ display:flex; gap:.5rem; align-items:center; justify-content:center; margin-bottom:.5rem; }

.labels-page{ display:none; }
.labels-page.active{ display:block; }
.labels-sheet{ display:grid; }

.label-card{ box-sizing:border-box; padding:2mm 2mm 1mm 2mm; overflow:hidden; }
.label-card .name{ font-weight:600; line-height:1.1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.label-card .hr{ font-size:9pt; line-height:1.1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.barcode svg{ width:180px; max-width:100%; height:auto; }

.help{ background:var(--panel); border:1px solid var(--line); border-radius:.6rem; padding:.75rem; margin-bottom:1rem; }
.settings-grid{ display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:.75rem; }
.sortable{ list-style:none; padding:0; margin:0; display:grid; gap:.25rem; }
.sortable li{ display:flex; gap:.5rem; align-items:center; background:var(--panel); border:1px dashed var(--line); border-radius:.5rem; padding:.3rem .4rem; }
.sortable .drag{ cursor:grab; color:var(--muted); }

.chips{ display:flex; flex-wrap:wrap; gap:.25rem; }
.chip{ display:inline-flex; align-items:center; gap:.35rem; background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:999px; padding:.2rem .5rem; }

dialog{ border:none; border-radius:.75rem; padding:0; background:var(--panel); color:var(--fg); }
dialog::backdrop{ background:rgba(0,0,0,.5); }
dialog form{ padding:1rem; min-width:320px; }
dialog h3{ margin:.2rem 0 .6rem; }
dialog .row{ display:flex; gap:.5rem; flex-wrap:wrap; }
dialog menu{ display:flex; gap:.5rem; justify-content:flex-end; margin-top:1rem; }

@media (max-width: 760px){
  nav button{ font-size:1.1rem; padding:.45rem; }
  .labels-config{ grid-template-columns: 1fr; }
}
.label-card { text-align:center; }
.label-card .name { margin-bottom: 1mm; }
.label-card .code-text { margin-top: 1mm; font-size: 9pt; }
.barcode svg { display:block; margin:0 auto; width:100%; height:auto; } /* pas d'attribut height dans le SVG */
